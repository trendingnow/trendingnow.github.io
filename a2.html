<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HomePlate Mini App</title>
  <style>
    :root{
      --bg:#fff3dc; --card:#f7c062; --card-dark:#e8a12e; --text:#3a2e1e; --muted:#8a6f4e; --shadow:0 8px 16px rgba(0,0,0,.12); --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:var(--bg); color:var(--text); display:flex; align-items:center; justify-content:center}

    .phone{width:min(420px,96vw); height:min(820px,96vh); background:#fff7e7; border:10px solid #111; border-radius:34px; box-shadow:0 20px 40px rgba(0,0,0,.18); overflow:hidden; position:relative}
    .notch{height:24px; width:140px; background:#111; border-bottom-left-radius:16px; border-bottom-right-radius:16px; position:absolute; top:0; left:50%; transform:translateX(-50%)}

    header{height:64px; display:flex; align-items:center; gap:10px; padding:0 16px}
    header button.back{appearance:none; border:0; background:transparent; font-size:28px; cursor:pointer; color:var(--muted)}
    header h1{flex:1; text-align:center; font-size:28px; margin:0; font-weight:800; letter-spacing:.3px}

    main{height:calc(100% - 64px - 64px); overflow:auto; padding:16px}
    footer{height:64px; display:flex; align-items:center; justify-content:space-between; padding:12px 16px; gap:12px; border-top:1px dashed #e3cfa7}

    .btn{appearance:none; border:0; cursor:pointer; padding:14px 18px; border-radius:16px; background:var(--card-dark); color:#fff; font-weight:700; box-shadow:var(--shadow); font-size:18px}
    .btn.secondary{background:#f0d7aa; color:#604519}
    .btn:active{transform:translateY(1px)}

    .screen{display:none; height:100%}
    .screen.active{display:block}

    .card{background:var(--card); padding:16px; border-radius:var(--radius); box-shadow:var(--shadow)}
    .center{display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; gap:18px}
    .big{font-size:36px; font-weight:900}
    .sub{font-size:14px; color:var(--muted)}

    .grid{display:grid; grid-template-columns:1fr; gap:14px}
    .tile{display:flex; align-items:center; gap:12px; padding:16px; font-size:18px; border-radius:16px; background:#ffe0a6; box-shadow:var(--shadow); cursor:pointer}
    .tile i{font-style:normal; font-weight:900; font-size:22px}

    .pref{font-size:22px; font-weight:800}
    .tagwrap{display:flex; gap:10px; flex-wrap:wrap}
    .tag{background:#ffe7bd; border:2px solid #f6c777; border-radius:24px; padding:8px 12px; cursor:pointer}
    .tag.active{background:#ffd073}

    .slider{height:46px; border-radius:14px; background:#f6c777; position:relative; box-shadow:var(--shadow)}
    .thumb{position:absolute; top:8px; left:10px; width:30px; height:30px; border-radius:999px; background:#d78300}
    .gesture{display:flex; gap:36px; align-items:center; justify-content:center}
    .arrow{width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;border-bottom:26px solid #e79f2a}
    .finger{width:28px;height:36px;background:#eaa545;border-radius:10px}

    .stars{display:flex; gap:8px; justify-content:center}
    .star{font-size:36px; cursor:pointer; filter:saturate(0.2)}
    .star.active{filter:saturate(1)}
    textarea{width:100%; min-height:120px; resize:vertical; border-radius:14px; border:2px solid #f2c87b; padding:12px; background:#fffaf0}

    .field{display:flex; flex-direction:column; gap:6px; width:100%}
    .field label{font-size:14px; color:var(--muted)}
    input[type=text], input[type=email], input[type=password]{width:100%; padding:12px 14px; border-radius:12px; border:2px solid #f2c87b; background:#fffaf0; font-size:16px}

    .list{display:flex; flex-direction:column; gap:12px}
    .row{display:flex; align-items:center; justify-content:space-between; padding:16px; background:#fff1ce; border-radius:14px}
    .switch{width:56px; height:30px; background:#d6c6a3; border-radius:999px; position:relative; box-shadow:inset 0 0 0 2px #cbb38a; cursor:pointer}
    .knob{position:absolute; top:3px; left:3px; width:24px; height:24px; background:white; border-radius:999px; transition:transform .2s ease}
    .switch.on{background:#b9e0b9}
    .switch.on .knob{transform:translateX(26px)}

    .toast{position:absolute; bottom:88px; left:50%; transform:translateX(-50%); background:#2b2b2b; color:#fff; padding:10px 14px; border-radius:999px; opacity:0; pointer-events:none; transition:opacity .2s}
    .toast.show{opacity:1}
  </style>
</head>
<body>
  <div class="phone" role="application" aria-label="HomePlate mini app">
    <div class="notch" aria-hidden="true"></div>
    <header>
      <button class="back" aria-label="Go back" title="Back" onclick="goBack()">‚Üê</button>
      <h1 id="title">Dashboard</h1>
    </header>

    <main>
      <!-- Dashboard -->
      <section id="dashboard" class="screen active">
        <div class="center" style="gap:22px">
          <div class="card center" style="padding:22px; width:100%">
            <div class="big">Jasmine</div>
            <div class="sub">Welcome back! What would you like to do?</div>
          </div>
          <div class="grid">
            <div class="tile" onclick="showScreen('cooking')"><i>üçΩÔ∏è</i> Set Cooking Level</div>
            <div class="tile" onclick="showScreen('profile')"><i>üë§</i> Profile</div>
            <div class="tile" onclick="showScreen('serve')"><i>‚ö°</i> QuickStart</div>
            <div class="tile" onclick="showScreen('mealLog')"><i>üóíÔ∏è</i> Meal Log</div>
            <div class="tile" onclick="showScreen('settings')"><i>‚öôÔ∏è</i> Settings</div>
            <div class="tile" onclick="showScreen('customize')"><i>üç≥</i> Customize Meal</div>
          </div>
        </div>
      </section>

      <!-- Profile placeholder -->
      <section id="profile" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Profile</div>
          <div class="card">Name: Jasmine<br/>Level: Beginner Cook</div>
        </div>
      </section>

      <!-- Cooking Level (new) -->
      <section id="cooking" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Set Cooking Level</div>
          <div class="card center" style="gap:14px; width:100%">
            <div id="levelWrap" class="tagwrap">
              <span class="tag level" data-level="Beginner">Beginner</span>
              <span class="tag level" data-level="Intermediate">Intermediate</span>
              <span class="tag level" data-level="Advanced">Advanced</span>
            </div>
            <div class="sub">Choose one level and continue.</div>
            <button class="btn" onclick="goSignup()">Continue ‚Üí</button>
          </div>
        </div>
      </section>

      <!-- Signup (new) -->
      <section id="signup" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Create your account</div>
          <div class="card center" style="gap:12px; width:100%">
            <div class="field"><label for="name">Full name</label><input id="name" type="text" placeholder="Jasmine Singh" /></div>
            <div class="field"><label for="email">Email</label><input id="email" type="email" placeholder="you@example.com" /></div>
            <div class="field"><label for="pass">Password</label><input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" /></div>
            <button class="btn" onclick="submitSignup()">Sign up</button>
          </div>
        </div>
      </section>

      <!-- Customize Meal -->
      <section id="customize" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Customize Meal</div>
          <div class="card center" style="gap:12px; width:100%">
            <div class="pref">Meal Preferences</div>
            <div class="tagwrap" id="prefTags">
              <span class="tag">Low spice</span>
              <span class="tag">High protein</span>
              <span class="tag">Budget</span>
              <span class="tag">Vegetarian</span>
              <span class="tag">15-min</span>
            </div>
          </div>
        </div>
      </section>

      <!-- Serve the Delicious Meal -->
      <section id="serve" class="screen">
        <div class="center" style="height:100%">
          <div class="card" style="width:100%; padding:18px">
            <div class="slider" aria-label="Serve progress slider">
              <div class="thumb" id="thumb"></div>
            </div>
          </div>
          <div class="big" style="font-size:30px">Serve the delicious meal</div>
          <button class="btn" onclick="showScreen('rating')">Next Step</button>
          <div class="gesture">
            <div class="finger" title="Drag"></div>
            <div class="arrow" aria-hidden="true"></div>
            <div class="arrow" aria-hidden="true"></div>
          </div>
        </div>
      </section>

      <!-- Meal Rating & Feedback -->
      <section id="rating" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Meal Rating and Feedback</div>
          <div class="stars" aria-label="Star rating">
            <span class="star" data-v="1">‚≠ê</span>
            <span class="star" data-v="2">‚≠ê</span>
            <span class="star" data-v="3">‚≠ê</span>
            <span class="star" data-v="4">‚≠ê</span>
            <span class="star" data-v="5">‚≠ê</span>
          </div>
          <textarea id="fb" placeholder="Tell us what worked well‚Ä¶"></textarea>
          <button class="btn" onclick="submitFeedback()">Submit</button>
        </div>
      </section>

      <!-- Trophy / Complete -->
      <section id="trophy" class="screen">
        <div class="center" style="height:100%">
          <div style="font-size:80px">üèÜ</div>
          <div class="big">Great Cook</div>
          <div class="sub">Meal complete!</div>
          <button class="btn" onclick="showScreen('dashboard')">Back to Home</button>
        </div>
      </section>

      <!-- Settings -->
      <section id="settings" class="screen">
        <div class="center" style="gap:16px">
          <div class="big">Settings</div>
          <div class="list" style="width:100%">
            <div class="row"><span>Notifications</span>
              <div class="switch on" role="switch" aria-checked="true" onclick="toggleSwitch(this)"><div class="knob"></div></div>
            </div>
            <div class="row"><span>Dark mode</span>
              <div class="switch" role="switch" aria-checked="false" onclick="toggleDark(this)"><div class="knob"></div></div>
            </div>
            <div class="row"><span>Measurement</span>
              <button class="btn secondary" id="unitsBtn" onclick="toggleUnits()">Metric</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Meal log placeholder -->
      <section id="mealLog" class="screen">
        <div class="center" style="height:100%">
          <div class="big">Meal Log</div>
          <div class="card">No meals yet. Start a QuickStart to cook your first dish!</div>
        </div>
      </section>
    </main>

    <footer>
      <button class="btn secondary" onclick="goBack()" aria-label="Back">‚Üê Back</button>
      <button class="btn" onclick="goForward()" aria-label="Next">Next ‚Üí</button>
    </footer>

    <div class="toast" id="toast" role="status" aria-live="polite"></div>
  </div>

  <script>
    // Navigation order & stack
    const order = ["dashboard","cooking","signup","customize","serve","rating","trophy","settings"]; // forward flow with the new pages
    const stack = []; let current = "dashboard";

    function setTitle(id){
      const map={dashboard:"Dashboard", profile:"Profile", cooking:"Cooking Level", signup:"Sign up", customize:"Customize", serve:"Serve", rating:"Rate Meal", trophy:"Great Cook", settings:"Settings", mealLog:"Meal Log"};
      document.getElementById('title').textContent = map[id]||id;
    }
    function showScreen(id, push=true){
      if(!document.getElementById(id)) return;
      document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      if(push && current) stack.push(current);
      current = id; setTitle(id);
    }
    function goBack(){ if(stack.length){ showScreen(stack.pop(), false);} else { toast('No previous screen'); } }
    function goForward(){ const i=order.indexOf(current); const next=order[i+1]; if(next) showScreen(next); else toast('End of flow'); }
    function toast(msg){ const t=document.getElementById('toast'); t.textContent=msg; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200); }

    // Tags toggle
    document.getElementById('prefTags').addEventListener('click', (e)=>{ if(e.target.classList.contains('tag')) e.target.classList.toggle('active'); });

    // Cooking level toggle
    document.addEventListener('click', (e)=>{
      if(e.target.classList.contains('level')){
        document.querySelectorAll('#levelWrap .level').forEach(x=>x.classList.remove('active'));
        e.target.classList.add('active');
      }
    });

    // Visual slider drag
    (function(){
      const slider = document.querySelector('#serve .slider');
      const thumb = document.getElementById('thumb');
      let dragging=false; const move=(x)=>{const r=slider.getBoundingClientRect(); let v=Math.min(Math.max(x - r.left - 15, 8), r.width-38); thumb.style.left=v+'px';};
      thumb.addEventListener('mousedown', ()=>dragging=true);
      window.addEventListener('mouseup', ()=>dragging=false);
      window.addEventListener('mousemove', (e)=>{ if(dragging) move(e.clientX); });
      thumb.addEventListener('touchstart', ()=>dragging=true);
      window.addEventListener('touchend', ()=>dragging=false);
      window.addEventListener('touchmove', (e)=>{ if(dragging) move(e.touches[0].clientX); });
    })();

    // Stars
    const starEls = Array.from(document.querySelectorAll('.star'));
    starEls.forEach(s=>s.addEventListener('click', ()=>{ const v=+s.dataset.v; starEls.forEach(k=>k.classList.toggle('active', +k.dataset.v<=v)); }));
    function submitFeedback(){ toast('Thanks!'); setTimeout(()=>showScreen('trophy'), 500); }

    // Settings toggles
    function toggleSwitch(el){ el.classList.toggle('on'); }
    function toggleDark(el){ el.classList.toggle('on'); const dark=el.classList.contains('on'); document.body.style.background=dark?'#1a1a1a':'var(--bg)'; document.querySelector('.phone').style.background=dark?'#222':'#fff7e7'; document.body.style.color=dark?'#f6f3ec':'var(--text)'; }
    function toggleUnits(){ const b=document.getElementById('unitsBtn'); b.textContent=b.textContent==='Metric'?'Imperial':'Metric'; toast('Units: '+b.textContent); }

    // Cooking ‚Üí Signup
    function goSignup(){ const active=document.querySelector('#levelWrap .level.active'); if(!active){ toast('Select your level first'); return;} showScreen('signup'); }
    function submitSignup(){ const n=name.value.trim(), e=email.value.trim(), p=pass.value.trim(); if(!n||!e||!p){ toast('Fill all fields'); return;} toast('Account created'); setTimeout(()=>showScreen('customize'),600); }

    // Keyboard support
    window.addEventListener('keydown', (e)=>{ if(e.key==='ArrowLeft') goBack(); if(e.key==='ArrowRight') goForward(); });
  </script>
</body>
</html>
